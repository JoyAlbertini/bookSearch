"use strict";(self["webpackChunkbook_search"]=self["webpackChunkbook_search"]||[]).push([[859],{2859:(e,o,a)=>{a.r(o),a.d(o,{default:()=>ko});var r=a(3673);const l={class:"full-width"};function t(e,o,a,t,i,n){const s=(0,r.up)("books"),d=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(d,{class:"flex"},{default:(0,r.w5)((()=>[(0,r._)("div",l,[(0,r.Wm)(s)])])),_:1})}var i=a(3617),n=a(1959);const s={name:"SearchBar",setup(){const e=(0,i.oR)(),o=async function(){let o="title:"+a.query;await e.dispatch("solr/fetchContents",{query:o}).catch((e=>{throw e}))};let a=(0,n.qj)({querySolr:o,query:""});return(0,n.BK)(a)}};var d=a(4260),c=a(4842),u=a(5096),m=a(4607),p=a(7518),g=a.n(p);g()(s,"components",{QInput:c.Z,QAvatar:u.Z,QBtn:m.Z});a(246);var w=a(8880),f=a(2323);const y=e=>((0,r.dD)("data-v-ae8afff6"),e=e(),(0,r.Cn)(),e),k={class:"q-pa-md"},h={class:"row justify-between no-wrap full-width"},v={class:"row q-gutter-sm no-wrap"},_={class:"column justify-center"},b={class:"row q-gutter-xs"},q={key:0,class:"column justify-center"},x=(0,r.Uk)(" && "),W=(0,r.Uk)(" || "),D=y((()=>(0,r._)("h4",null,"(",-1))),U={key:1,class:"column justify-center"},C=y((()=>(0,r._)("h4",null,")",-1))),Z={key:2},O=(0,r.Uk)(" && "),z=(0,r.Uk)(" || "),R={key:2},j={key:3},Q={key:3},V=(0,r.Uk)(" && "),N=(0,r.Uk)(" || "),A={class:"row q-gutter-sm no-wrap"},B={class:"column justify-center q-pr-md"},L={key:0},M={style:{color:"blue"}},S=(0,r.Uk)(" results "),P={key:1},Y={style:{color:"blue"}},I=(0,r.Uk)(" results "),T={class:"q-pa-sm col-xs-12 col-sm-6 col-md-3"},K={class:"column justify-center"},H=["href"],F={class:"q-pb-sm"},E={id:"#scroll",class:"row q-gutter-xs no-wrap"},G={key:0},J={style:{color:"red"}},X={class:"row reverse q-pt-sm justify-between no-wrap"},$={key:0};function ee(e,o,a,l,t,i){const n=(0,r.up)("q-btn"),s=(0,r.up)("q-avatar"),d=(0,r.up)("q-input"),c=(0,r.up)("q-icon"),u=(0,r.up)("q-chip"),m=(0,r.up)("WordHighLighter"),p=(0,r.up)("q-card-section"),g=(0,r.up)("q-separator"),y=(0,r.up)("q-scroll-area"),ee=(0,r.up)("q-card"),oe=(0,r.up)("q-expansion-item"),ae=(0,r.up)("q-table"),re=(0,r.up)("overlay-page"),le=(0,r.up)("add-modifier");return(0,r.wg)(),(0,r.iD)("div",k,[(0,r.Wm)(ae,{grid:"","card-container-class":e.cardContainerClass,rows:e.books,"row-key":"name","hide-bottom":"","hide-header":"",pagination:e.pagination,"onUpdate:pagination":o[3]||(o[3]=o=>e.pagination=o),"no-data-label":"No data"},{top:(0,r.w5)((a=>[(0,r._)("div",h,[(0,r._)("div",v,[(0,r.Wm)(d,{color:"primary",style:{width:"400px"},outlined:"",onKeyup:(0,w.D2)(e.querySolr,["enter"]),modelValue:e.query,"onUpdate:modelValue":o[1]||(o[1]=o=>e.query=o),label:"Search a book"},{before:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{icon:"search",onClick:o[0]||(o[0]=o=>e.querySolr()),color:"primary"})])),_:1})])),_:1},8,["onKeyup","modelValue"]),(0,r.Wm)(n,{dense:"",flat:"",icon:"add",onClick:o[2]||(o[2]=o=>e.addModifier()),color:"primary"}),(0,r._)("div",_,[(0,r._)("div",b,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.operators,((o,a)=>((0,r.wg)(),(0,r.iD)("div",{key:o,class:"column justify-center"},["("===o.type?((0,r.wg)(),(0,r.iD)("div",q,[(0,r.Wm)(u,{dense:"",color:"white",class:"no-margin",removable:"",onRemove:o=>e.operators.splice(a,1)},{append:(0,r.w5)((()=>[(0,r.Wm)(c,{name:"cancel",size:"xs"})])),default:(0,r.w5)((()=>["AND"===o.operator?((0,r.wg)(),(0,r.j4)(s,{key:0,style:{"font-size":"20px"},color:"red","text-color":"white"},{default:(0,r.w5)((()=>[x])),_:1})):(0,r.kq)("",!0),"OR"===o.operator?((0,r.wg)(),(0,r.j4)(s,{key:1,style:{"font-size":"20px"},color:"blue","text-color":"white"},{default:(0,r.w5)((()=>[W])),_:1})):(0,r.kq)("",!0),D])),_:2},1032,["onRemove"])])):")"===o.type?((0,r.wg)(),(0,r.iD)("div",U,[(0,r.Wm)(u,{dense:"",color:"white",class:"no-margin",removable:"",onRemove:o=>e.operators.splice(a,1)},{default:(0,r.w5)((()=>[C])),_:2},1032,["onRemove"])])):"Year"===o.type?((0,r.wg)(),(0,r.iD)("div",Z,[(0,r.Wm)(u,{class:"no-margin",removable:"",onRemove:o=>e.operators.splice(a,1)},{default:(0,r.w5)((()=>["AND"===o.operator?((0,r.wg)(),(0,r.j4)(s,{key:0,style:{"font-size":"24px"},color:"red","text-color":"white"},{default:(0,r.w5)((()=>[O])),_:1})):(0,r.kq)("",!0),"OR"===o.operator?((0,r.wg)(),(0,r.j4)(s,{key:1,style:{"font-size":"24px"},color:"blue","text-color":"white"},{default:(0,r.w5)((()=>[z])),_:1})):(0,r.kq)("",!0),o.min!==o.max?((0,r.wg)(),(0,r.iD)("div",R,(0,f.zw)(o.label),1)):((0,r.wg)(),(0,r.iD)("div",j,(0,f.zw)("year:"+o.min),1))])),_:2},1032,["onRemove"])])):((0,r.wg)(),(0,r.iD)("div",Q,[(0,r.Wm)(u,{class:"no-margin",removable:"",onRemove:o=>e.operators.splice(a,1)},{default:(0,r.w5)((()=>["AND"===o.operator?((0,r.wg)(),(0,r.j4)(s,{key:0,style:{"font-size":"24px"},color:"red","text-color":"white"},{default:(0,r.w5)((()=>[V])),_:1})):(0,r.kq)("",!0),"OR"===o.operator?((0,r.wg)(),(0,r.j4)(s,{key:1,style:{"font-size":"24px"},color:"blue","text-color":"white"},{default:(0,r.w5)((()=>[N])),_:1})):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,f.zw)(o.label),1)])),_:2},1032,["onRemove"])]))])))),128))])])]),(0,r._)("div",A,[(0,r._)("div",B,[a.pagination.page*a.pagination.rowsPerPage<e.lengthBooks?((0,r.wg)(),(0,r.iD)("caption",L,[(0,r.Uk)((0,f.zw)(a.pagination.page*a.pagination.rowsPerPage)+" - ",1),(0,r._)("strong",M,(0,f.zw)(e.lengthBooks),1),S])):((0,r.wg)(),(0,r.iD)("caption",P,[(0,r.Uk)((0,f.zw)(e.lengthBooks)+" - ",1),(0,r._)("strong",Y,(0,f.zw)(e.lengthBooks),1),I]))]),(0,r.Wm)(n,{style:{color:"blue",height:"50px"},icon:"chevron_left",disable:a.isFirstPage,onClick:a.prevPage},null,8,["disable","onClick"]),(0,r.Wm)(n,{style:{color:"blue",height:"50px"},icon:"chevron_right",disable:a.isLastPage,onClick:a.nextPage},null,8,["disable","onClick"])])])])),item:(0,r.w5)((o=>[(0,r._)("div",T,[(0,r.Wm)(ee,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"q-pt-sm q-pb-sm"},{default:(0,r.w5)((()=>[(0,r._)("div",K,[(0,r._)("a",{class:"text-primary",href:o.row.link,style:{"text-decoration":"none"}},[(0,r._)("strong",null,[(0,r.Wm)(m,{splitBySpace:!0,query:e.query},{default:(0,r.w5)((()=>[(0,r.Uk)((0,f.zw)(o.row.title[0]),1)])),_:2},1032,["query"])])],8,H)])])),_:2},1024),(0,r.Wm)(g),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r._)("div",F,[(0,r.Wm)(y,{id:"scroll",style:{height:"31px"}},{default:(0,r.w5)((()=>[(0,r._)("div",E,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.row.authors,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"col-auto",key:e},[(0,r.Wm)(u,{color:"secondary","text-color":"white",class:"no-margin"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,f.zw)(e),1)])),_:2},1024)])))),128))])])),_:2},1024)]),(0,r.Wm)(y,{class:"q-pb-sm",style:{height:"90px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{splitBySpace:!0,query:e.query},{default:(0,r.w5)((()=>[(0,r.Uk)((0,f.zw)(o.row.description[0]),1)])),_:2},1032,["query"])])),_:2},1024),(0,r.Wm)(oe,{class:"no-padding",style:{color:"blue"},label:"Subjects"},{default:(0,r.w5)((()=>[(0,r.Wm)(ee,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{splitBySpace:!0,query:e.query},{default:(0,r.w5)((()=>[(0,r.Uk)((0,f.zw)(o.row.subjects[0]),1)])),_:2},1032,["query"]),e.debug?((0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("caption",J,(0,f.zw)("Score:"+o.row.score),1)])):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,r._)("div",X,[(0,r.Wm)(u,{class:"no-margin",outline:"",color:"primary","text-color":"white"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,f.zw)(o.row.yearOfPublication[0]),1)])),_:2},1024),(0,r.Wm)(u,{class:"no-margin"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,f.zw)(o.row.language[0]),1)])),_:2},1024)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["card-container-class","rows","pagination"]),e.renderModify?((0,r.wg)(),(0,r.iD)("div",$,[(0,r.Wm)(re),(0,r.Wm)(le,{onSetRenderModify:e.setRenderModify,onAddOperator:e.addOperator},null,8,["onSetRenderModify","onAddOperator"])])):(0,r.kq)("",!0)])}var oe=a(8825);const ae=e=>((0,r.dD)("data-v-6addb616"),e=e(),(0,r.Cn)(),e),re={class:"overlay full-width full-height"},le=ae((()=>(0,r._)("p",null,"text",-1))),te=[le];function ie(e,o,a,l,t,i){return(0,r.wg)(),(0,r.iD)("div",re,te)}const ne={name:"overlayPage"},se=(0,d.Z)(ne,[["render",ie],["__scopeId","data-v-6addb616"]]),de=se,ce={id:"floating-panel",style:{width:"560px"}},ue={class:"q-pa-md"},me={class:"row q-pb-md"},pe={key:0},ge=(0,r.Uk)("Author"),we={key:1},fe=(0,r.Uk)("Author"),ye={key:2},ke=(0,r.Uk)("Year"),he={key:3},ve=(0,r.Uk)("Year"),_e={key:4},be=(0,r.Uk)("Language"),qe={key:5},xe=(0,r.Uk)("Language"),We={key:6},De=(0,r.Uk)("Title"),Ue={key:7},Ce=(0,r.Uk)("Title"),Ze={key:8},Oe=(0,r.Uk)("("),ze={key:9},Re=(0,r.Uk)("("),je={key:10},Qe=(0,r.Uk)(")"),Ve={key:11},Ne=(0,r.Uk)(")"),Ae={class:"row q-gutter-sm"},Be={key:1,class:"col-grow",style:{"margin-right":"20px","margin-left":"18px"}},Le={key:2,class:"col-grow"},Me={key:3,class:"col-grow"},Se={key:4,class:"col-grow"},Pe={class:"row q-gutter-sm no-wrap"},Ye={key:5,class:"col-grow"},Ie=(0,r.Uk)("("),Te={key:6,class:"col-grow"},Ke=(0,r.Uk)(")"),He={class:"row no-wrap"};function Fe(e,o,a,l,t,i){const n=(0,r.up)("q-btn"),s=(0,r.up)("q-select"),d=(0,r.up)("q-range"),c=(0,r.up)("q-input"),u=(0,r.up)("q-chip");return(0,r.wg)(),(0,r.iD)("div",ce,[(0,r._)("div",ue,[(0,r._)("div",me,["Author"===e.modifier?((0,r.wg)(),(0,r.iD)("div",pe,[(0,r.Wm)(n,{outline:"",color:"primary",onClick:o[0]||(o[0]=o=>e.modifier="Author"),class:"col-grow"},{default:(0,r.w5)((()=>[ge])),_:1})])):((0,r.wg)(),(0,r.iD)("div",we,[(0,r.Wm)(n,{flat:"",color:"primary",onClick:o[1]||(o[1]=o=>e.modifier="Author"),class:"col-grow"},{default:(0,r.w5)((()=>[fe])),_:1})])),"Year"===e.modifier?((0,r.wg)(),(0,r.iD)("div",ye,[(0,r.Wm)(n,{outline:"",color:"primary",onClick:o[2]||(o[2]=o=>e.modifier="Year"),class:"col-grow"},{default:(0,r.w5)((()=>[ke])),_:1})])):((0,r.wg)(),(0,r.iD)("div",he,[(0,r.Wm)(n,{flat:"",color:"primary",onClick:o[3]||(o[3]=o=>e.modifier="Year"),class:"col-grow"},{default:(0,r.w5)((()=>[ve])),_:1})])),"Language"===e.modifier?((0,r.wg)(),(0,r.iD)("div",_e,[(0,r.Wm)(n,{outline:"",color:"primary",onClick:o[4]||(o[4]=o=>e.modifier="Language"),class:"col-grow"},{default:(0,r.w5)((()=>[be])),_:1})])):((0,r.wg)(),(0,r.iD)("div",qe,[(0,r.Wm)(n,{flat:"",color:"primary",onClick:o[5]||(o[5]=o=>e.modifier="Language"),class:"col-grow"},{default:(0,r.w5)((()=>[xe])),_:1})])),"Title"===e.modifier?((0,r.wg)(),(0,r.iD)("div",We,[(0,r.Wm)(n,{outline:"",color:"primary",onClick:o[6]||(o[6]=o=>e.modifier="Title"),class:"col-grow"},{default:(0,r.w5)((()=>[De])),_:1})])):((0,r.wg)(),(0,r.iD)("div",Ue,[(0,r.Wm)(n,{flat:"",color:"primary",onClick:o[7]||(o[7]=o=>e.modifier="Title"),class:"col-grow"},{default:(0,r.w5)((()=>[Ce])),_:1})])),"("===e.modifier?((0,r.wg)(),(0,r.iD)("div",Ze,[(0,r.Wm)(n,{outline:"",color:"primary",onClick:o[8]||(o[8]=o=>e.modifier="("),class:"col-grow"},{default:(0,r.w5)((()=>[Oe])),_:1})])):((0,r.wg)(),(0,r.iD)("div",ze,[(0,r.Wm)(n,{flat:"",color:"primary",onClick:o[9]||(o[9]=o=>e.modifier="("),class:"col-grow"},{default:(0,r.w5)((()=>[Re])),_:1})])),")"===e.modifier?((0,r.wg)(),(0,r.iD)("div",je,[(0,r.Wm)(n,{outline:"",color:"primary",onClick:o[10]||(o[10]=o=>e.modifier=")"),class:"col-grow"},{default:(0,r.w5)((()=>[Qe])),_:1})])):((0,r.wg)(),(0,r.iD)("div",Ve,[(0,r.Wm)(n,{flat:"",color:"primary",onClick:o[11]||(o[11]=o=>e.modifier=")"),class:"col-grow"},{default:(0,r.w5)((()=>[Ne])),_:1})]))]),(0,r._)("div",Ae,[")"!==e.modifier?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"col-3",rounded:"",outlined:"",modelValue:e.booleanOperator,"onUpdate:modelValue":o[12]||(o[12]=o=>e.booleanOperator=o),options:["None","AND","OR"],color:"secondary","options-selected-class":"text-primary"},null,8,["modelValue"])):(0,r.kq)("",!0),"Year"===e.modifier?((0,r.wg)(),(0,r.iD)("div",Be,[(0,r.Wm)(d,{modelValue:e.range,"onUpdate:modelValue":o[13]||(o[13]=o=>e.range=o),label:"",color:"secondary",min:2017,max:2021,step:1,markers:""},null,8,["modelValue"])])):"Language"===e.modifier?((0,r.wg)(),(0,r.iD)("div",Le,[(0,r.Wm)(s,{filled:"",modelValue:e.language,"onUpdate:modelValue":o[14]||(o[14]=o=>e.language=o),options:e.options,label:"Language",color:"primary","options-selected-class":"text-primary"},null,8,["modelValue","options"])])):"Title"===e.modifier?((0,r.wg)(),(0,r.iD)("div",Me,[(0,r.Wm)(c,{outlined:"",modelValue:e.title,"onUpdate:modelValue":o[15]||(o[15]=o=>e.title=o),label:"Book title"},null,8,["modelValue"])])):"Author"===e.modifier?((0,r.wg)(),(0,r.iD)("div",Se,[(0,r._)("div",Pe,[(0,r.Wm)(c,{class:"col-grow",outlined:"",modelValue:e.authorName,"onUpdate:modelValue":o[16]||(o[16]=o=>e.authorName=o),label:"Name"},null,8,["modelValue"]),(0,r.Wm)(c,{class:"col-grow",outlined:"",modelValue:e.authorLastName,"onUpdate:modelValue":o[17]||(o[17]=o=>e.authorLastName=o),label:"Last name"},null,8,["modelValue"])])])):"("===e.modifier?((0,r.wg)(),(0,r.iD)("div",Ye,[(0,r.Wm)(u,{square:"",size:"xl"},{default:(0,r.w5)((()=>[Ie])),_:1})])):")"===e.modifier?((0,r.wg)(),(0,r.iD)("div",Te,[(0,r.Wm)(u,{square:"",size:"xl"},{default:(0,r.w5)((()=>[Ke])),_:1})])):(0,r.kq)("",!0)])]),(0,r._)("div",He,[(0,r.Wm)(n,{style:{"border-radius":"0px 0px 0px 8px"},outline:"",class:"col-6",icon:"done",onClick:e.saveModifier,color:"positive"},null,8,["onClick"]),(0,r.Wm)(n,{style:{"border-radius":"0px 0px 8px 0px"},outline:"",class:"col-6",icon:"clear",onClick:e.resetModifier,color:"negative"},null,8,["onClick"])])])}const Ee=["english","french","german","italian","spanish"],Ge={name:"addModifier",components:{},emits:["setRenderModify","addOperator"],setup(e,{emit:o}){const a=function(){o("setRenderModify",!1)},r=function(){if("Author"===l.modifier){const e={label:"author: "+l.authorName+" "+l.authorLastName,type:"Author",operator:l.booleanOperator,name:l.authorName,lastName:l.authorLastName};o("addOperator",e)}else if("Year"===l.modifier){const e={label:"year: "+l.range.min+"-"+l.range.max,type:"Year",operator:l.booleanOperator,min:l.range.min,max:l.range.max};o("addOperator",e)}else if("Language"===l.modifier){const e={label:"lang: "+l.language,type:"Language",operator:l.booleanOperator,language:l.language};o("addOperator",e)}else if("Title"===l.modifier){const e={label:"title: "+l.title,type:"Title",operator:l.booleanOperator,title:l.title};o("addOperator",e)}else if("("===l.modifier){const e={label:"(",type:"(",operator:l.booleanOperator};o("addOperator",e)}else if(")"===l.modifier){const e={label:")",type:")",operator:"None"};o("addOperator",e)}o("setRenderModify",!1)};let l=(0,n.qj)({counter:0,range:(0,n.iH)({min:2017,max:2021}),language:"",title:"",authorName:"",authorLastName:"",booleanOperator:"None",modifier:"Year",options:Ee,resetModifier:a,saveModifier:r});return(0,n.BK)(l)}};var Je=a(2081),Xe=a(1391),$e=a(7030);const eo=(0,d.Z)(Ge,[["render",Fe]]),oo=eo;g()(Ge,"components",{QBtn:m.Z,QSelect:Je.Z,QRange:Xe.Z,QInput:c.Z,QChip:$e.Z});var ao=a(3769);const ro={name:"Books",components:{AddModifier:oo,OverlayPage:de,WordHighLighter:ao.Z},setup(){const e=(0,oe.Z)(),o=(0,i.oR)(),a=async function(){await o.dispatch("solr/fetchContents",{query:g.query,operators:g.operators}).catch((e=>{throw e}))};(0,r.bv)((async()=>{await o.dispatch("solr/fetchAll").catch((e=>{throw e}))}));const l=(0,n.Fl)((()=>o.getters["solr/retrievedData"])),t=(0,n.Fl)((()=>o.getters["solr/lengthData"])),s=(0,n.Fl)((()=>e.screen.gt.xs?"grid-masonry grid-masonry--"+(e.screen.gt.sm?"3":"2"):null)),d=function(e){g.operators.push(e)},c=function(){u(!0)},u=function(e){g.renderModify=e},m=function(){return e.screen.lt.sm?4:e.screen.lt.md?8:12},p=(0,n.iH)({page:1,rowsPerPage:m()});let g=(0,n.qj)({querySolr:a,addOperator:d,setRenderModify:u,addModifier:c,query:"",operators:[],renderModify:!1,debug:!0,lengthBooks:t,books:l,cardContainerClass:s,pagination:p,tableScope:null});return(0,n.BK)(g)}};var lo=a(34),to=a(4554),io=a(151),no=a(5589),so=a(5869),co=a(7704),uo=a(4615),mo=a(3414);const po=(0,d.Z)(ro,[["render",ee],["__scopeId","data-v-ae8afff6"]]),go=po;g()(ro,"components",{QTable:lo.Z,QInput:c.Z,QAvatar:u.Z,QBtn:m.Z,QChip:$e.Z,QIcon:to.Z,QCard:io.Z,QCardSection:no.Z,QSeparator:so.Z,QScrollArea:co.Z,QExpansionItem:uo.Z,QItem:mo.Z});const wo=(0,r.aZ)({name:"PageIndex",components:{Books:go}});var fo=a(4379);const yo=(0,d.Z)(wo,[["render",t]]),ko=yo;g()(wo,"components",{QPage:fo.Z})}}]);